(()=>{"use strict";function e(){const n=document.querySelector(".projects");n.innerHTML="";for(let c=0;c<o.length;c++){let s=o[c],d=document.createElement("div");d.setAttribute("data-index",c),d.classList.add("project-card"),d.innerHTML=`\n      <h1 class="project-title">${s.projectTitle}</h1>\n      <img class="delete-project" src="assets/delete.svg">\n      `,d.addEventListener("click",(()=>{var n;n=c,o.forEach(((e,t)=>e.active=t===n)),e(),i(),t()})),s.active&&d.classList.add("active-project"),n.appendChild(d)}s()}function t(){const e=document.querySelector(".header"),t=c();if(e.innerHTML="",t){const o=document.createElement("div");o.classList.add("project-info"),o.innerHTML=`<h1 class="title" >${t.projectTitle}</h1>`,e.appendChild(o)}}let o=[];class n{constructor(e){this.projectTitle=e,this.todosArray=[],this.active=!0}}function c(){return o.find((e=>e.active))}function s(){localStorage.setItem("projects",JSON.stringify(o))}function i(){const e=document.querySelector(".main"),t=document.createElement("div");t.classList.add("render-todo-form"),t.innerHTML='\n  <p class="todo-btn-render">\n    <img\n      class="add-svg"\n      alt="add-todo-plus-picture"\n      src="assets/create.svg"\n    />\n     To Do\n  </p>',e.innerHTML="";const o=c();o&&o.todosArray.forEach(((t,o)=>{let n=document.createElement("div");n.innerHTML=`<div class="todo-card" data-index='${o}'>\n        <div class='left-side-todo'>\n        <h1 class="todo-title">${t.title}</h1>\n        <h2 class='description'>${t.description}</h2>\n        </div>\n        <div class='right-side-todo'>\n        <h2 class='date'>${t.date}</h2>\n        <h2 class='priority'>${t.priority}</h2>\n        <button class='delete-todo'>Delete</button>\n        <img class='edit-todo-svg' data-index='${o}' src='assets/edit.svg' alt='edit-svg'>\n        </div>\n    </div>`,e.appendChild(n)})),e.appendChild(t)}class d{constructor(e,t,o,n){this.title=e,this.description=t,this.date=o,this.priority=n}}const r=[];!function(){const c=localStorage.getItem("projects");c?(o=JSON.parse(c),e(),i()):function(){const c=new n("Default Project","");o.push(c),e(),t()}()}();const l=document.querySelector(".project-form-container"),a=document.querySelector(".add-project");a.addEventListener("click",(function(c){c.preventDefault();const i=document.querySelector("#project-name").value;let d=new n(i);o.push(d),console.log("pushing the project array to AllProjectsDiv"),console.log(d),e(),t(),s(),console.log(JSON.stringify(o))})),a.addEventListener("click",e),a.addEventListener("click",(function(){l.style.display="none"})),document.querySelector(".cancel-project").addEventListener("click",(function(){l.style.display="none"}));const u=document.querySelector(".add-todo");u.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector("#todo-title").value,o=document.querySelector("#todo-description").value,n=document.querySelector("#todo-date").value,l=document.querySelector("#priority-choice").value,a=c();if(a){const e=new d(t,o,n,l);r.push(e),console.log(JSON.stringify(r)),a.todosArray.push(e),i(),s()}console.log(a)})),u.addEventListener("click",i),u.addEventListener("click",(function(){y.style.display="none"})),document.querySelector(".main").addEventListener("click",(function(e){const t=e.target;t.classList.contains("delete-todo")&&function(e){const t=c();t&&(t.todosArray.splice(e,1),i(),s())}(t.closest(".todo-card").dataset.index)})),document.querySelector(".projects").addEventListener("click",(function(t){const n=t.target;if(n.classList.contains("delete-project")){c=n.closest(".project-card").dataset.index,o.splice(c,1),e(),i(),s()}var c})),document.querySelector(".create-project").addEventListener("click",(function(){l.style.display="flex"}));const p=document.querySelector(".edit-todo-form-container"),y=document.querySelector(".todo-form-container");document.addEventListener("click",(function(e){const t=e.target;t.classList.contains("todo-btn-render")||t.classList.contains("add-svg")?0===o.length?(y.style.display="none",alert("No projects available!")):y.style.display="flex":t.classList.contains("cancel-todo")?y.style.display="none":t.classList.contains("cancel-project")?l.style.display="none":t.classList.contains("edit-todo-svg")&&(p.style.display="flex")})),document.querySelector(".edit-add-todo").addEventListener("click",(function(e){e.preventDefault(),function(e){const t=document.querySelector(".edit-todo-form-container"),o=c().todosArray[e];o.title=document.querySelector("#edit-todo-title").value,o.description=document.querySelector("#edit-todo-description").value,o.date=document.querySelector("#edit-todo-date").value,o.priority=document.querySelector("#edit-priority-choice").value,t.style.display="none",s()}(document.querySelector(".edit-todo-form-container").dataset.index),i()})),document.querySelector(".main").addEventListener("click",(function(e){const t=e.target;if(t.classList.contains("edit-todo-svg")){const e=t.dataset.index;document.querySelector(".edit-todo-form-container").dataset.index=e,p.style.display="flex"}}))})();